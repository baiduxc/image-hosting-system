# æ•°æ®åº“å‡çº§è¯´æ˜

## ğŸ“ æ›´æ–°å†…å®¹

æœ¬æ¬¡æ›´æ–°ä¸ºå›¾åºŠç³»ç»Ÿæ·»åŠ äº† SQLite æ•°æ®åº“æ”¯æŒå’Œæ•°æ®åº“ç®¡ç†åŠŸèƒ½ï¼Œæ»¡è¶³ä¸ªäººç”¨æˆ·å’Œå°å‹éƒ¨ç½²çš„éœ€æ±‚ã€‚

## âœ¨ æ–°å¢åŠŸèƒ½

1. **SQLite æ•°æ®åº“æ”¯æŒ**
   - æ— éœ€é…ç½®å¤–éƒ¨æ•°æ®åº“
   - è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–
   - é€‚åˆä¸ªäººä½¿ç”¨å’Œå°å‹éƒ¨ç½²

2. **æ•°æ®åº“å¤‡ä»½åŠŸèƒ½**
   - ä¸€é”®å¤‡ä»½ SQLite æ•°æ®åº“
   - ç®¡ç†å¤‡ä»½æ–‡ä»¶
   - æ”¯æŒä¸‹è½½å¤‡ä»½

3. **æ•°æ®åº“è½¬æ¢åŠŸèƒ½**
   - PostgreSQL è½¬ SQLite
   - åœ¨çº¿è½¬æ¢ï¼Œæ— éœ€å‘½ä»¤è¡Œ
   - ä¿ç•™æ‰€æœ‰æ•°æ®å’Œå…³ç³»

4. **æ•°æ®åº“ç®¡ç†ç•Œé¢**
   - æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯
   - ç®¡ç†å¤‡ä»½æ–‡ä»¶
   - æ‰§è¡Œæ•°æ®åº“è¿ç§»

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–°ç”¨æˆ·ï¼ˆä½¿ç”¨ SQLiteï¼‰

1. å®‰è£…ä¾èµ–ï¼š
```bash
cd server
npm install
```

2. åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
DB_TYPE=sqlite
SQLITE_PATH=./data/database.sqlite
JWT_SECRET=your-secret-key-here
PORT=3001
```

3. å¯åŠ¨æœåŠ¡ï¼š
```bash
npm start
```

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å¹¶åˆå§‹åŒ–ï¼Œé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

### ç°æœ‰ç”¨æˆ·ï¼ˆä» PostgreSQL è¿ç§»ï¼‰

1. ç™»å½•ç®¡ç†åå°
2. è¿›å…¥"ç³»ç»Ÿè®¾ç½®" â†’ "æ•°æ®åº“ç®¡ç†"æ ‡ç­¾
3. è¾“å…¥ PostgreSQL è¿æ¥å­—ç¬¦ä¸²
4. ç‚¹å‡»"å¼€å§‹è½¬æ¢"
5. ä¸‹è½½ç”Ÿæˆçš„ SQLite æ–‡ä»¶
6. å°†æ–‡ä»¶æ”¾åˆ° `server/data/database.sqlite`
7. ä¿®æ”¹ `.env` è®¾ç½®ä¸º `DB_TYPE=sqlite`
8. é‡å¯æœåŠ¡å™¨

## ğŸ“ æ–‡ä»¶è¯´æ˜

**æ–°å¢æ–‡ä»¶ï¼ˆserver ç›®å½•ï¼‰ï¼š**
- `databaseAdapter.js` - æ•°æ®åº“é€‚é…å±‚
- `databaseInit.js` - æ•°æ®åº“åˆå§‹åŒ–
- `databaseOperations.js` - æ•°æ®åº“æ“ä½œæ¥å£
- `routes/database.js` - æ•°æ®åº“ç®¡ç†API

**æ–°å¢ç›®å½•ï¼š**
- `data/` - å­˜æ”¾ SQLite æ•°æ®åº“æ–‡ä»¶
- `backups/` - å­˜æ”¾å¤‡ä»½æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- `migrations/` - å­˜æ”¾è¿ç§»æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰

## ğŸ”§ ç¯å¢ƒå˜é‡

```env
# æ•°æ®åº“ç±»å‹ï¼ˆsqlite æˆ– postgresï¼‰
DB_TYPE=sqlite

# SQLite æ–‡ä»¶è·¯å¾„ï¼ˆä½¿ç”¨ SQLite æ—¶å¿…å¡«ï¼‰
SQLITE_PATH=./data/database.sqlite

# PostgreSQL è¿æ¥å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨ PostgreSQL æ—¶å¿…å¡«ï¼‰
# DATABASE_URL=postgresql://user:password@host:5432/database
# DB_SSL_MODE=false

# JWT å¯†é’¥ï¼ˆå¿…å¡«ï¼‰
JWT_SECRET=your-secret-key-here

# æœåŠ¡å™¨ç«¯å£
PORT=3001
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

**æ¨èä½¿ç”¨ SQLiteï¼š**
- âœ… ä¸ªäººä½¿ç”¨
- âœ… å°å‹å›¢é˜Ÿï¼ˆ< 10äººï¼‰
- âœ… æ•°æ®é‡è¾ƒå°ï¼ˆ< 10GBï¼‰
- âœ… ç®€å•éƒ¨ç½²

**æ¨èä½¿ç”¨ PostgreSQLï¼š**
- âœ… å¤šç”¨æˆ·å¹¶å‘
- âœ… å¤§æ•°æ®é‡
- âœ… ç”Ÿäº§ç¯å¢ƒ
- âœ… éœ€è¦é«˜çº§åŠŸèƒ½

## ğŸ“š è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹ `DATABASE-UPGRADE-GUIDE.md` è·å–å®Œæ•´çš„å‡çº§æŒ‡å—å’Œä½¿ç”¨è¯´æ˜ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. SQLite æ•°æ®åº“æ–‡ä»¶éœ€è¦å®šæœŸå¤‡ä»½
2. æ•°æ®åº“è¿ç§»è¿‡ç¨‹ä¸å¯é€†ï¼Œå»ºè®®å…ˆå¤‡ä»½ PostgreSQL æ•°æ®
3. è¿ç§»å¤§å‹æ•°æ®åº“å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
4. ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
5. docker-backend ç›®å½•éœ€è¦æ‰‹åŠ¨æ›´æ–°æ–‡ä»¶ï¼ˆè§ docker-backend/README-DATABASE.mdï¼‰

## ğŸ¯ ä¸‹ä¸€æ­¥

1. é€‰æ‹©æ•°æ®åº“ç±»å‹ï¼ˆSQLite æˆ– PostgreSQLï¼‰
2. é…ç½®ç¯å¢ƒå˜é‡
3. å®‰è£…ä¾èµ–å¹¶å¯åŠ¨æœåŠ¡
4. ç™»å½•ç®¡ç†åå°æµ‹è¯•åŠŸèƒ½
5. å®šæœŸå¤‡ä»½æ•°æ®åº“

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`DATABASE-UPGRADE-GUIDE.md`
2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
3. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®
4. æŸ¥çœ‹ GitHub Issues

---

**æ›´æ–°æ—¶é—´ï¼š** 2025-01-20  
**ç‰ˆæœ¬ï¼š** v2.0.0

